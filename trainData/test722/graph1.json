[{"cfgs": [], "code": "this.context = context.clone()", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_runtime_function_LambdaFunction.java", "fieldParents": [], "isDel": true, "lineBeg": 29, "lineEnd": 29, "lineMapIndex": 11, "methodParents": [3], "nodeIndex": 0, "rootcause": false, "commits": ["e583498e15722014c67ff3af1be30b9bfbe9c81d"]}, {"cfgs": [], "code": "RuntimeUtils.printTrace(env,TRACE_PREFIX + args[0].desc(env) + WHITE_SPACE + \"?\" + WHITE_SPACE + args[0].desc(env)+ WHITE_SPACE + \":\" + WHITE_SPACE + args[1].desc(env) + \" => \" + result.desc(env))", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_runtime_op_OperationRuntime.java", "fieldParents": [], "isDel": true, "lineBeg": 167, "lineEnd": 169, "lineMapIndex": 16, "methodParents": [], "nodeIndex": 1, "rootcause": false, "commits": ["d2fca1302e1a70650fcdf0c397bdc212faf1d3b0", "6f2cf72461b4a8cf86ce9e25f504601c9f1027c3", "5e53bcd1e0ddf442a7863975828513e908a1a2a1"]}, {"cfgs": [], "code": "String exp = \"a=1; b = lambda(x) -> a+ x end ; a=4 ; b(5)\"", "dfgs": [], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": true, "lineBeg": 9, "lineEnd": 9, "lineMapIndex": 25, "methodParents": [], "nodeIndex": 2, "rootcause": false, "commits": ["e583498e15722014c67ff3af1be30b9bfbe9c81d"]}, {"cfgs": [4], "code": "public Env clone() ", "dfgs": [4, 6], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": true, "lineBeg": 79, "lineEnd": 79, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 3, "rootcause": false, "commits": ["e583498e15722014c67ff3af1be30b9bfbe9c81d"]}, {"cfgs": [5], "code": "Env ret = new Env(this.mDefaults == EMPTY_ENV ? EMPTY_ENV : new HashMap<>(this.mDefaults),new HashMap<>(this.mOverrides))", "dfgs": [6], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": true, "lineBeg": 80, "lineEnd": 81, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 4, "rootcause": false, "commits": ["e583498e15722014c67ff3af1be30b9bfbe9c81d", "5e53bcd1e0ddf442a7863975828513e908a1a2a1"]}, {"cfgs": [6], "code": "ret.instance = this.instance", "dfgs": [6], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": true, "lineBeg": 82, "lineEnd": 82, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 5, "rootcause": false, "commits": ["5e53bcd1e0ddf442a7863975828513e908a1a2a1"]}, {"cfgs": [], "code": "return ret", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": true, "lineBeg": 83, "lineEnd": 83, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 6, "rootcause": false, "commits": ["5e53bcd1e0ddf442a7863975828513e908a1a2a1"]}, {"cfgs": [], "code": "buf.append(super.toString()).append(\"{\"). //append(Variable.INSTANCE_VAR).append(\"=\").append(this.instance).append(\", \").//append(Variable.ENV_VAR).append(\"=\").append(\"<this>\")", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": true, "lineBeg": 284, "lineEnd": 286, "lineMapIndex": 43, "methodParents": [7], "nodeIndex": 7, "rootcause": false, "commits": ["6f2cf72461b4a8cf86ce9e25f504601c9f1027c3", "5e53bcd1e0ddf442a7863975828513e908a1a2a1"]}, {"cfgs": [], "code": "import java.util.HashSet", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_runtime_function_LambdaFunction.java", "fieldParents": [], "isDel": false, "lineBeg": 3, "lineEnd": 3, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 8, "rootcause": false, "commits": []}, {"cfgs": [], "code": "import java.util.Set", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_runtime_function_LambdaFunction.java", "fieldParents": [], "isDel": false, "lineBeg": 6, "lineEnd": 6, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 9, "rootcause": false, "commits": []}, {"cfgs": [], "code": "import com.googlecode.aviator.BaseExpression", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_runtime_function_LambdaFunction.java", "fieldParents": [], "isDel": false, "lineBeg": 7, "lineEnd": 7, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 10, "rootcause": false, "commits": []}, {"cfgs": [12], "code": "this.context = context", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_runtime_function_LambdaFunction.java", "fieldParents": [], "isDel": false, "lineBeg": 32, "lineEnd": 32, "lineMapIndex": 0, "methodParents": [], "nodeIndex": 11, "rootcause": false, "commits": []}, {"cfgs": [13], "code": "Set<String> argumentSet = new HashSet<>(this.arguments)", "dfgs": [14], "fName": "src_main_java_com_googlecode_aviator_runtime_function_LambdaFunction.java", "fieldParents": [], "isDel": false, "lineBeg": 33, "lineEnd": 33, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 12, "rootcause": false, "commits": []}, {"cfgs": [14], "code": "for (String var : expression.getVariableNames())", "dfgs": [14, 15], "fName": "src_main_java_com_googlecode_aviator_runtime_function_LambdaFunction.java", "fieldParents": [], "isDel": false, "lineBeg": 34, "lineEnd": 34, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 13, "rootcause": false, "commits": []}, {"cfgs": [15], "code": "if (!var.contains(\".\") && !argumentSet.contains(var))", "dfgs": [15], "fName": "src_main_java_com_googlecode_aviator_runtime_function_LambdaFunction.java", "fieldParents": [], "isDel": false, "lineBeg": 35, "lineEnd": 35, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 14, "rootcause": false, "commits": []}, {"cfgs": [], "code": "context.capture(var, ((BaseExpression) expression).getExpression())", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_runtime_function_LambdaFunction.java", "fieldParents": [], "isDel": false, "lineBeg": 37, "lineEnd": 37, "lineMapIndex": -1, "methodParents": [36], "nodeIndex": 15, "rootcause": false, "commits": []}, {"cfgs": [], "code": "RuntimeUtils.printTrace(env,TRACE_PREFIX + args[0].desc(env) + WHITE_SPACE + \"?\" + WHITE_SPACE + args[0].desc(env)+ WHITE_SPACE + \":\" + WHITE_SPACE + args[1].desc(env) + \" => \" + result.desc(env))", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_runtime_op_OperationRuntime.java", "fieldParents": [], "isDel": false, "lineBeg": 167, "lineEnd": 169, "lineMapIndex": 1, "methodParents": [], "nodeIndex": 16, "rootcause": false, "commits": []}, {"cfgs": [], "code": "public void testIssue101() ", "dfgs": [], "fName": "src_test_java_com_googlecode_aviator_LambdaUnitTest.java", "fieldParents": [], "isDel": false, "lineBeg": 61, "lineEnd": 61, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 17, "rootcause": false, "commits": []}, {"cfgs": [19], "code": "String exp = \"a=1; b = lambda(x) -> a+ x end ; a=4 ; b(5)\"", "dfgs": [19], "fName": "src_test_java_com_googlecode_aviator_LambdaUnitTest.java", "fieldParents": [], "isDel": false, "lineBeg": 62, "lineEnd": 62, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 18, "rootcause": false, "commits": []}, {"cfgs": [], "code": "AviatorEvaluator.execute(exp)", "dfgs": [], "fName": "src_test_java_com_googlecode_aviator_LambdaUnitTest.java", "fieldParents": [], "isDel": false, "lineBeg": 63, "lineEnd": 63, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 19, "rootcause": false, "commits": []}, {"cfgs": [], "code": "public void testIssue101_assignment() ", "dfgs": [], "fName": "src_test_java_com_googlecode_aviator_LambdaUnitTest.java", "fieldParents": [], "isDel": false, "lineBeg": 67, "lineEnd": 67, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 20, "rootcause": false, "commits": []}, {"cfgs": [], "code": "String exp = \"a=1; c=a; b = lambda(x) -> a+ x end ; c=4 ; b(5)\"", "dfgs": [], "fName": "src_test_java_com_googlecode_aviator_LambdaUnitTest.java", "fieldParents": [], "isDel": false, "lineBeg": 68, "lineEnd": 68, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 21, "rootcause": false, "commits": []}, {"cfgs": [], "code": "assertEquals(6, AviatorEvaluator.execute(exp))", "dfgs": [], "fName": "src_test_java_com_googlecode_aviator_LambdaUnitTest.java", "fieldParents": [], "isDel": false, "lineBeg": 69, "lineEnd": 69, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 22, "rootcause": false, "commits": []}, {"cfgs": [], "code": "import java.util.HashMap", "dfgs": [], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 3, "lineEnd": 3, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 23, "rootcause": false, "commits": []}, {"cfgs": [], "code": "import java.util.Map", "dfgs": [], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 4, "lineEnd": 4, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 24, "rootcause": false, "commits": []}, {"cfgs": [26], "code": "String exp = \"a=1; b = lambda(x) -> a+ x end ; b(5)\"", "dfgs": [30, 31], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 11, "lineEnd": 11, "lineMapIndex": 2, "methodParents": [], "nodeIndex": 25, "rootcause": false, "commits": []}, {"cfgs": [27], "code": "Map<String, Object> env = new HashMap<String, Object>()", "dfgs": [27], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 15, "lineEnd": 15, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 26, "rootcause": false, "commits": []}, {"cfgs": [28], "code": "env.put(\"x\", 1)", "dfgs": [28], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 16, "lineEnd": 16, "lineMapIndex": -1, "methodParents": [40], "nodeIndex": 27, "rootcause": false, "commits": []}, {"cfgs": [29], "code": "env.put(\"y\", 2)", "dfgs": [29], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 17, "lineEnd": 17, "lineMapIndex": -1, "methodParents": [40], "nodeIndex": 28, "rootcause": false, "commits": []}, {"cfgs": [30], "code": "env.put(\"z\", 3)", "dfgs": [31], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 18, "lineEnd": 18, "lineMapIndex": -1, "methodParents": [40], "nodeIndex": 29, "rootcause": false, "commits": []}, {"cfgs": [31], "code": "AviatorEvaluator.defineFunction(\"test\",\"lambda(x) -> lambda(y) -> lambda(z) -> x + y + z end end end\")", "dfgs": [31], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 20, "lineEnd": 21, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 30, "rootcause": false, "commits": []}, {"cfgs": [32], "code": "System.out.println(AviatorEvaluator.execute(\"test(4)(5)(6)\", env))", "dfgs": [32, 33], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 22, "lineEnd": 22, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 31, "rootcause": false, "commits": []}, {"cfgs": [33], "code": "env.put(\"a\", 4)", "dfgs": [33], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 24, "lineEnd": 24, "lineMapIndex": -1, "methodParents": [40], "nodeIndex": 32, "rootcause": false, "commits": []}, {"cfgs": [], "code": "System.out.println(AviatorEvaluator.execute(\"test(4)(5)(6) + a\", env))", "dfgs": [], "fName": "src_test_java_com_googlecode_aviator_example_LambdaExample.java", "fieldParents": [], "isDel": false, "lineBeg": 25, "lineEnd": 25, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 33, "rootcause": false, "commits": []}, {"cfgs": [], "code": "import com.googlecode.aviator.exception.ExpressionRuntimeException", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": false, "lineBeg": 34, "lineEnd": 34, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 34, "rootcause": false, "commits": []}, {"cfgs": [], "code": "private Map<String, String> capturedVars", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": false, "lineBeg": 72, "lineEnd": 72, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 35, "rootcause": false, "commits": []}, {"cfgs": [37], "code": "public void capture(String var, String expression) ", "dfgs": [39, 37, 38], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": false, "lineBeg": 74, "lineEnd": 74, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 36, "rootcause": false, "commits": []}, {"cfgs": [38, 39], "code": "if (capturedVars == null)", "dfgs": [39], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [35], "isDel": false, "lineBeg": 75, "lineEnd": 75, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 37, "rootcause": false, "commits": []}, {"cfgs": [39], "code": "capturedVars = new HashMap<>()", "dfgs": [39], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [35], "isDel": false, "lineBeg": 76, "lineEnd": 76, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 38, "rootcause": false, "commits": []}, {"cfgs": [], "code": "capturedVars.put(var, expression)", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [35], "isDel": false, "lineBeg": 78, "lineEnd": 78, "lineMapIndex": -1, "methodParents": [40], "nodeIndex": 39, "rootcause": false, "commits": []}, {"cfgs": [41], "code": "String capturedExp = null", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": false, "lineBeg": 215, "lineEnd": 215, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 40, "rootcause": false, "commits": []}, {"cfgs": [42], "code": "if (this.capturedVars != null && this.capturedVars.containsKey(key))", "dfgs": [42], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [35], "isDel": false, "lineBeg": 216, "lineEnd": 216, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 41, "rootcause": false, "commits": []}, {"cfgs": [], "code": "throw new ExpressionRuntimeException(\"Can't assignment value to captured variable.The `\" + key+ \"` is already captured by lambda.\")", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": false, "lineBeg": 217, "lineEnd": 218, "lineMapIndex": -1, "methodParents": [], "nodeIndex": 42, "rootcause": false, "commits": []}, {"cfgs": [], "code": "buf.append(super.toString()).append(\"{\"). //append(Variable.INSTANCE_VAR).append(\"=\").append(this.instance).append(\", \").//append(Variable.ENV_VAR).append(\"=\").append(\"<this>\")", "dfgs": [], "fName": "src_main_java_com_googlecode_aviator_utils_Env.java", "fieldParents": [], "isDel": false, "lineBeg": 292, "lineEnd": 294, "lineMapIndex": 7, "methodParents": [43], "nodeIndex": 43, "rootcause": false, "commits": []}]