[{"cfgs":[],"code":"import java.util.ArrayList","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":true,"lineBeg":9,"lineEnd":9,"lineMapIndex":11,"methodParents":[],"nodeIndex":0},{"cfgs":[],"code":"import java.util.List","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":true,"lineBeg":10,"lineEnd":10,"lineMapIndex":13,"methodParents":[],"nodeIndex":1},{"cfgs":[],"code":"return null","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":true,"lineBeg":15,"lineEnd":15,"lineMapIndex":-1,"methodParents":[],"nodeIndex":2},{"cfgs":[4],"code":"public static void compress(QueryExecutionPlan originalPlan) ","dfgs":[4],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":true,"lineBeg":18,"lineEnd":18,"lineMapIndex":-1,"methodParents":[],"nodeIndex":3},{"cfgs":[],"code":"traverse.add(originalPlan.getRoot())","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":true,"lineBeg":22,"lineEnd":22,"lineMapIndex":24,"methodParents":[],"nodeIndex":4},{"cfgs":[],"code":"QueryExecutionPlanSimplifier.compress(queryExecutionPlan)","dfgs":[],"fName":"src_test_java_org_verdictdb_core_querying_ola_AsyncAggScaleTest.java","fieldParents":[],"isDel":true,"lineBeg":156,"lineEnd":156,"lineMapIndex":-1,"methodParents":[3],"nodeIndex":5},{"cfgs":[],"code":"import org.apache.commons.lang3.tuple.ImmutablePair","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":3,"lineEnd":3,"lineMapIndex":-1,"methodParents":[],"nodeIndex":6},{"cfgs":[],"code":"import org.verdictdb.core.execution.ExecutablePlan","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":6,"lineEnd":6,"lineMapIndex":-1,"methodParents":[],"nodeIndex":7},{"cfgs":[],"code":"import org.verdictdb.core.execution.ExecutionInfoToken","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":7,"lineEnd":7,"lineMapIndex":-1,"methodParents":[],"nodeIndex":8},{"cfgs":[],"code":"import org.verdictdb.core.execution.ExecutionTokenQueue","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":8,"lineEnd":8,"lineMapIndex":-1,"methodParents":[],"nodeIndex":9},{"cfgs":[],"code":"import org.verdictdb.core.sqlobject.CreateTableAsSelectQuery","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":11,"lineEnd":11,"lineMapIndex":-1,"methodParents":[],"nodeIndex":10},{"cfgs":[],"code":"import org.verdictdb.exception.VerdictDBException","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":13,"lineEnd":13,"lineMapIndex":0,"methodParents":[],"nodeIndex":11},{"cfgs":[],"code":"import org.verdictdb.exception.VerdictDBValueException","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":14,"lineEnd":14,"lineMapIndex":-1,"methodParents":[],"nodeIndex":12},{"cfgs":[],"code":"import java.util.*","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":16,"lineEnd":16,"lineMapIndex":1,"methodParents":[],"nodeIndex":13},{"cfgs":[15],"code":"QueryExecutionPlan plan = new QueryExecutionPlan(\"\")","dfgs":[43],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":27,"lineEnd":27,"lineMapIndex":-1,"methodParents":[],"nodeIndex":14},{"cfgs":[16],"code":"plan.scrambleMeta = originalPlan.scrambleMeta","dfgs":[43],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":28,"lineEnd":28,"lineMapIndex":-1,"methodParents":[],"nodeIndex":15},{"cfgs":[17],"code":"plan.idCreator = originalPlan.idCreator","dfgs":[43],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":29,"lineEnd":29,"lineMapIndex":-1,"methodParents":[],"nodeIndex":16},{"cfgs":[18],"code":"HashMap<ExecutableNodeBase, ExecutableNodeBase> copyMap = new HashMap<>()","dfgs":[24],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":30,"lineEnd":30,"lineMapIndex":-1,"methodParents":[],"nodeIndex":17},{"cfgs":[19],"code":"ExecutableNodeBase newRoot = originalPlan.getRoot().deepcopy()","dfgs":[19,22,23,24],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":31,"lineEnd":31,"lineMapIndex":-1,"methodParents":[],"nodeIndex":18},{"cfgs":[20],"code":"plan.root = newRoot","dfgs":[43],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":32,"lineEnd":32,"lineMapIndex":-1,"methodParents":[],"nodeIndex":19},{"cfgs":[21],"code":"List<ExecutableNodeBase> nodeToCopy = new ArrayList<>()","dfgs":[23],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":33,"lineEnd":33,"lineMapIndex":-1,"methodParents":[],"nodeIndex":20},{"cfgs":[22],"code":"List<ExecutableNodeBase> nodeCopied = new ArrayList<>()","dfgs":[22],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":34,"lineEnd":34,"lineMapIndex":-1,"methodParents":[],"nodeIndex":21},{"cfgs":[23],"code":"nodeCopied.add(originalPlan.root)","dfgs":[24,28],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":35,"lineEnd":35,"lineMapIndex":-1,"methodParents":[],"nodeIndex":22},{"cfgs":[24],"code":"nodeToCopy.addAll(newRoot.getSources())","dfgs":[24,25],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":36,"lineEnd":36,"lineMapIndex":-1,"methodParents":[],"nodeIndex":23},{"cfgs":[25],"code":"copyMap.put(originalPlan.getRoot(), newRoot)","dfgs":[33,32],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":37,"lineEnd":37,"lineMapIndex":4,"methodParents":[],"nodeIndex":24},{"cfgs":[26,33],"code":"while (!nodeToCopy.isEmpty())","dfgs":[26],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":38,"lineEnd":38,"lineMapIndex":-1,"methodParents":[],"nodeIndex":25},{"cfgs":[27],"code":"ExecutableNodeBase node = nodeToCopy.get(0)","dfgs":[27,28],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":39,"lineEnd":39,"lineMapIndex":-1,"methodParents":[],"nodeIndex":26},{"cfgs":[28],"code":"nodeToCopy.remove(0)","dfgs":[31],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":40,"lineEnd":40,"lineMapIndex":-1,"methodParents":[],"nodeIndex":27},{"cfgs":[29],"code":"if (!nodeCopied.contains(node))","dfgs":[30,29],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":41,"lineEnd":41,"lineMapIndex":-1,"methodParents":[],"nodeIndex":28},{"cfgs":[30],"code":"ExecutableNodeBase copy = node.deepcopy()","dfgs":[30,32],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":42,"lineEnd":42,"lineMapIndex":-1,"methodParents":[],"nodeIndex":29},{"cfgs":[31],"code":"nodeCopied.add(node)","dfgs":[31],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":43,"lineEnd":43,"lineMapIndex":-1,"methodParents":[],"nodeIndex":30},{"cfgs":[32],"code":"nodeToCopy.addAll(node.getSources())","dfgs":[32],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":44,"lineEnd":44,"lineMapIndex":-1,"methodParents":[],"nodeIndex":31},{"cfgs":[],"code":"copyMap.put(node, copy)","dfgs":[33],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":45,"lineEnd":45,"lineMapIndex":-1,"methodParents":[],"nodeIndex":32},{"cfgs":[34,42],"code":"for (Map.Entry<ExecutableNodeBase, ExecutableNodeBase> entry:copyMap.entrySet())","dfgs":[34,38],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":48,"lineEnd":48,"lineMapIndex":-1,"methodParents":[],"nodeIndex":33},{"cfgs":[35],"code":"if (!entry.getKey().getSources().isEmpty())","dfgs":[35],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":49,"lineEnd":49,"lineMapIndex":-1,"methodParents":[],"nodeIndex":34},{"cfgs":[36],"code":"entry.getValue().sources.clear()","dfgs":[36],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":50,"lineEnd":50,"lineMapIndex":-1,"methodParents":[],"nodeIndex":35},{"cfgs":[37],"code":"entry.getValue().channels.clear()","dfgs":[37],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":51,"lineEnd":51,"lineMapIndex":-1,"methodParents":[],"nodeIndex":36},{"cfgs":[38],"code":"for (Pair<ExecutableNodeBase, Integer> source:entry.getKey().sources)","dfgs":[38,39],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":52,"lineEnd":52,"lineMapIndex":-1,"methodParents":[],"nodeIndex":37},{"cfgs":[39],"code":"ExecutableNodeBase copy = copyMap.get(source.getLeft())","dfgs":[39],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":53,"lineEnd":53,"lineMapIndex":-1,"methodParents":[],"nodeIndex":38},{"cfgs":[40],"code":"entry.getValue().sources.add(new ImmutablePair<>(copy, source.getRight()))","dfgs":[40,41],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":54,"lineEnd":54,"lineMapIndex":-1,"methodParents":[],"nodeIndex":39},{"cfgs":[41],"code":"copy.subscribers.set(copy.subscribers.indexOf(entry.getKey()), entry.getValue())","dfgs":[41],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":55,"lineEnd":55,"lineMapIndex":-1,"methodParents":[],"nodeIndex":40},{"cfgs":[42],"code":"if (!entry.getValue().channels.containsKey(source.getRight()))","dfgs":[42],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":56,"lineEnd":56,"lineMapIndex":-1,"methodParents":[],"nodeIndex":41},{"cfgs":[43],"code":"entry.getValue().channels.put(source.getRight(), new ExecutionTokenQueue())","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":57,"lineEnd":57,"lineMapIndex":-1,"methodParents":[],"nodeIndex":42},{"cfgs":[44],"code":"traverse.add(plan.getRoot())","dfgs":[44],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":68,"lineEnd":68,"lineMapIndex":-1,"methodParents":[],"nodeIndex":43},{"cfgs":[],"code":"return plan","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlanSimplifier.java","fieldParents":[],"isDel":false,"lineBeg":102,"lineEnd":102,"lineMapIndex":-1,"methodParents":[],"nodeIndex":44},{"cfgs":[],"code":"import java.io.Serializable","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryExecutionPlan.java","fieldParents":[],"isDel":false,"lineBeg":11,"lineEnd":11,"lineMapIndex":-1,"methodParents":[],"nodeIndex":45},{"cfgs":[],"code":"to.placeholderTablesinFilter = from.placeholderTablesinFilter","dfgs":[],"fName":"src_main_java_org_verdictdb_core_querying_QueryNodeWithPlaceHolders.java","fieldParents":[],"isDel":false,"lineBeg":89,"lineEnd":89,"lineMapIndex":-1,"methodParents":[],"nodeIndex":46}]