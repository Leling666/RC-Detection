[{"cfgs":[],"code":"payload.put(\"channel_id\", this.channelId)","dfgs":[],"fName":"src_main_java_com_twilio_jwt_taskrouter_TaskRouterCapability.java","fieldParents":[],"isDel":true,"lineBeg":52,"lineEnd":52,"lineMapIndex":15,"methodParents":[],"nodeIndex":0},{"cfgs":[],"code":"import org.junit.Assert","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":true,"lineBeg":7,"lineEnd":7,"lineMapIndex":20,"methodParents":[],"nodeIndex":1},{"cfgs":[],"code":"import org.junit.Test","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":true,"lineBeg":8,"lineEnd":8,"lineMapIndex":21,"methodParents":[],"nodeIndex":2},{"cfgs":[],"code":"import java.util.Date","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":true,"lineBeg":10,"lineEnd":10,"lineMapIndex":16,"methodParents":[],"nodeIndex":3},{"cfgs":[],"code":"import java.util.List","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":true,"lineBeg":11,"lineEnd":11,"lineMapIndex":18,"methodParents":[],"nodeIndex":4},{"cfgs":[6],"code":"private static final String WORKSPACE_SID = \"WK123\"","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":true,"lineBeg":20,"lineEnd":20,"lineMapIndex":24,"methodParents":[],"nodeIndex":5},{"cfgs":[],"code":"private static final String CHANNEL_ID = \"CH123\"","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":true,"lineBeg":21,"lineEnd":21,"lineMapIndex":23,"methodParents":[],"nodeIndex":6},{"cfgs":[8],"code":"Jwt jwt =new TaskRouterCapability.Builder(ACCOUNT_SID, AUTH_TOKEN, WORKSPACE_SID, CHANNEL_ID).policies(policies).build()","dfgs":[8],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[5],"isDel":true,"lineBeg":28,"lineEnd":31,"lineMapIndex":25,"methodParents":[],"nodeIndex":7},{"cfgs":[],"code":"Assert.assertEquals(CHANNEL_ID, claims.get(\"channel_id\"))","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[6],"isDel":true,"lineBeg":39,"lineEnd":39,"lineMapIndex":26,"methodParents":[],"nodeIndex":8},{"cfgs":[],"code":"private static class FilterRequirementSerializer extends JsonSerializer<Map<String, FilterRequirement>> ","dfgs":[],"fName":"src_main_java_com_twilio_jwt_taskrouter_Policy.java","fieldParents":[],"isDel":true,"lineBeg":153,"lineEnd":153,"lineMapIndex":-1,"methodParents":[],"nodeIndex":9},{"cfgs":[],"code":"public void serialize(Map<String, FilterRequirement> stringFilterRequirementMap,JsonGenerator jsonGenerator,SerializerProvider serializerProvider) throws IOException, JsonProcessingException","dfgs":[11,12],"fName":"src_main_java_com_twilio_jwt_taskrouter_Policy.java","fieldParents":[],"isDel":true,"lineBeg":155,"lineEnd":159,"lineMapIndex":-1,"methodParents":[],"nodeIndex":10},{"cfgs":[12],"code":"for (Map.Entry<String, FilterRequirement> entry : stringFilterRequirementMap.entrySet())","dfgs":[12],"fName":"src_main_java_com_twilio_jwt_taskrouter_Policy.java","fieldParents":[],"isDel":true,"lineBeg":160,"lineEnd":160,"lineMapIndex":-1,"methodParents":[],"nodeIndex":11},{"cfgs":[13],"code":"jsonGenerator.writeObjectFieldStart(entry.getKey())","dfgs":[13],"fName":"src_main_java_com_twilio_jwt_taskrouter_Policy.java","fieldParents":[],"isDel":true,"lineBeg":161,"lineEnd":161,"lineMapIndex":-1,"methodParents":[],"nodeIndex":12},{"cfgs":[14],"code":"jsonGenerator.writeBooleanField(\"required\", entry.getValue().value())","dfgs":[14],"fName":"src_main_java_com_twilio_jwt_taskrouter_Policy.java","fieldParents":[],"isDel":true,"lineBeg":162,"lineEnd":162,"lineMapIndex":-1,"methodParents":[],"nodeIndex":13},{"cfgs":[],"code":"jsonGenerator.writeEndObject()","dfgs":[],"fName":"src_main_java_com_twilio_jwt_taskrouter_Policy.java","fieldParents":[],"isDel":true,"lineBeg":163,"lineEnd":163,"lineMapIndex":-1,"methodParents":[],"nodeIndex":14},{"cfgs":[],"code":"payload.put(\"channel\", this.channelId)","dfgs":[],"fName":"src_main_java_com_twilio_jwt_taskrouter_TaskRouterCapability.java","fieldParents":[],"isDel":false,"lineBeg":52,"lineEnd":52,"lineMapIndex":0,"methodParents":[],"nodeIndex":15},{"cfgs":[],"code":"import java.util.Date","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":3,"lineEnd":3,"lineMapIndex":3,"methodParents":[],"nodeIndex":16},{"cfgs":[],"code":"import java.util.HashMap","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":4,"lineEnd":4,"lineMapIndex":-1,"methodParents":[],"nodeIndex":17},{"cfgs":[],"code":"import java.util.List","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":5,"lineEnd":5,"lineMapIndex":4,"methodParents":[],"nodeIndex":18},{"cfgs":[],"code":"import java.util.Map","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":6,"lineEnd":6,"lineMapIndex":-1,"methodParents":[],"nodeIndex":19},{"cfgs":[],"code":"import org.junit.Assert","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":8,"lineEnd":8,"lineMapIndex":1,"methodParents":[],"nodeIndex":20},{"cfgs":[],"code":"import org.junit.Test","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":9,"lineEnd":9,"lineMapIndex":2,"methodParents":[],"nodeIndex":21},{"cfgs":[],"code":"import com.twilio.http.HttpMethod","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":12,"lineEnd":12,"lineMapIndex":-1,"methodParents":[],"nodeIndex":22},{"cfgs":[24],"code":"private static final String WORKSPACE_SID = \"WS123\"","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":25,"lineEnd":25,"lineMapIndex":6,"methodParents":[],"nodeIndex":23},{"cfgs":[],"code":"private static final String WORKER_SID = \"WK123\"","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":26,"lineEnd":26,"lineMapIndex":5,"methodParents":[],"nodeIndex":24},{"cfgs":[26],"code":"final Jwt jwt =new TaskRouterCapability.Builder(ACCOUNT_SID, AUTH_TOKEN, WORKSPACE_SID, WORKER_SID).policies(policies).build()","dfgs":[26],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[23],"isDel":false,"lineBeg":33,"lineEnd":36,"lineMapIndex":7,"methodParents":[],"nodeIndex":25},{"cfgs":[],"code":"Assert.assertEquals(WORKER_SID, claims.get(\"channel\"))","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[24],"isDel":false,"lineBeg":44,"lineEnd":44,"lineMapIndex":8,"methodParents":[],"nodeIndex":26},{"cfgs":[],"code":"public void testWorkerToken() ","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":51,"lineEnd":51,"lineMapIndex":-1,"methodParents":[],"nodeIndex":27},{"cfgs":[29],"code":"final List<Policy> policies = PolicyUtils.defaultWorkerPolicies(WORKSPACE_SID, WORKER_SID)","dfgs":[34,31],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[23],"isDel":false,"lineBeg":52,"lineEnd":52,"lineMapIndex":-1,"methodParents":[],"nodeIndex":28},{"cfgs":[30],"code":"final Map<String, FilterRequirement> activityUpdateFilter = new HashMap<>()","dfgs":[30],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":54,"lineEnd":54,"lineMapIndex":-1,"methodParents":[],"nodeIndex":29},{"cfgs":[31],"code":"activityUpdateFilter.put(\"ActivitySid\", FilterRequirement.REQUIRED)","dfgs":[31],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":55,"lineEnd":55,"lineMapIndex":-1,"methodParents":[],"nodeIndex":30},{"cfgs":[32],"code":"final Policy allowActivityUpdates = new Policy.Builder().url(UrlUtils.worker(WORKSPACE_SID, WORKER_SID)).method(HttpMethod.POST).postFilter(activityUpdateFilter).build()","dfgs":[34,32,33],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[23],"isDel":false,"lineBeg":57,"lineEnd":60,"lineMapIndex":-1,"methodParents":[],"nodeIndex":31},{"cfgs":[33],"code":"final Policy allowTasksUpdate = new Policy.Builder().url(UrlUtils.allTasks(WORKER_SID)).method(HttpMethod.POST).build()","dfgs":[35,33],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[24],"isDel":false,"lineBeg":62,"lineEnd":65,"lineMapIndex":-1,"methodParents":[],"nodeIndex":32},{"cfgs":[34],"code":"final Policy allowReservationUpdate = new Policy.Builder().url(UrlUtils.allReservations(WORKSPACE_SID, WORKER_SID)).method(HttpMethod.POST).build()","dfgs":[36,37],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[23],"isDel":false,"lineBeg":67,"lineEnd":70,"lineMapIndex":-1,"methodParents":[],"nodeIndex":33},{"cfgs":[35],"code":"policies.add(allowActivityUpdates)","dfgs":[35],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":72,"lineEnd":72,"lineMapIndex":-1,"methodParents":[],"nodeIndex":34},{"cfgs":[36],"code":"policies.add(allowTasksUpdate)","dfgs":[36],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":73,"lineEnd":73,"lineMapIndex":-1,"methodParents":[],"nodeIndex":35},{"cfgs":[37],"code":"policies.add(allowReservationUpdate)","dfgs":[37],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":74,"lineEnd":74,"lineMapIndex":-1,"methodParents":[],"nodeIndex":36},{"cfgs":[38],"code":"final Jwt jwt =new TaskRouterCapability.Builder(ACCOUNT_SID, AUTH_TOKEN, WORKSPACE_SID, WORKER_SID).policies(policies).build()","dfgs":[39,40,41,46,38],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[23],"isDel":false,"lineBeg":76,"lineEnd":79,"lineMapIndex":-1,"methodParents":[],"nodeIndex":37},{"cfgs":[39],"code":"final Claims claims =Jwts.parser().setSigningKey(AUTH_TOKEN.getBytes()).parseClaimsJws(jwt.toJwt()).getBody()","dfgs":[39],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":80,"lineEnd":84,"lineMapIndex":-1,"methodParents":[],"nodeIndex":38},{"cfgs":[40],"code":"Assert.assertEquals(WORKSPACE_SID, claims.get(\"workspace_sid\"))","dfgs":[40],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[23],"isDel":false,"lineBeg":86,"lineEnd":86,"lineMapIndex":-1,"methodParents":[],"nodeIndex":39},{"cfgs":[41],"code":"Assert.assertEquals(WORKER_SID, claims.get(\"channel\"))","dfgs":[41],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[24],"isDel":false,"lineBeg":87,"lineEnd":87,"lineMapIndex":-1,"methodParents":[],"nodeIndex":40},{"cfgs":[42],"code":"Assert.assertEquals(ACCOUNT_SID, claims.get(\"account_sid\"))","dfgs":[42],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":88,"lineEnd":88,"lineMapIndex":-1,"methodParents":[],"nodeIndex":41},{"cfgs":[43],"code":"Assert.assertEquals(ACCOUNT_SID, claims.getIssuer())","dfgs":[43],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":89,"lineEnd":89,"lineMapIndex":-1,"methodParents":[],"nodeIndex":42},{"cfgs":[44],"code":"Assert.assertTrue(claims.getExpiration().getTime() > new Date().getTime())","dfgs":[46,44],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":90,"lineEnd":90,"lineMapIndex":-1,"methodParents":[],"nodeIndex":43},{"cfgs":[45],"code":"final List<Policy> claimedPolicies = (List<Policy>) claims.get(\"policies\")","dfgs":[46],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":92,"lineEnd":92,"lineMapIndex":-1,"methodParents":[],"nodeIndex":44},{"cfgs":[46],"code":"final int connectionPolicies = 2","dfgs":[46],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":93,"lineEnd":93,"lineMapIndex":-1,"methodParents":[],"nodeIndex":45},{"cfgs":[],"code":"Assert.assertEquals(policies.size() + connectionPolicies, claimedPolicies.size())","dfgs":[],"fName":"src_test_java_com_twilio_jwt_taskrouter_TaskRouterCapabilityTest.java","fieldParents":[],"isDel":false,"lineBeg":94,"lineEnd":94,"lineMapIndex":-1,"methodParents":[],"nodeIndex":46},{"cfgs":[],"code":"import com.fasterxml.jackson.annotation.JsonFormat","dfgs":[],"fName":"src_main_java_com_twilio_jwt_taskrouter_FilterRequirement.java","fieldParents":[],"isDel":false,"lineBeg":3,"lineEnd":3,"lineMapIndex":-1,"methodParents":[],"nodeIndex":47},{"cfgs":[],"code":"@JsonFormat(shape = JsonFormat.Shape.OBJECT)public enum FilterRequirement","dfgs":[],"fName":"src_main_java_com_twilio_jwt_taskrouter_FilterRequirement.java","fieldParents":[],"isDel":false,"lineBeg":5,"lineEnd":6,"lineMapIndex":-1,"methodParents":[],"nodeIndex":48}]